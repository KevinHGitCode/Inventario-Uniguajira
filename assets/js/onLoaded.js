// Inicializar funcionalidades cuando el DOM esté listo
window.onload = () => {
    // sesion data
    fetch('/api/session/get')
        .then(response => response.json())
        .then(data => {
            window.sesion = data;
            console.log('Sesión cargada:', data);
        })
        .catch(error => console.error('Error al cargar la sesión:', error));

    // Obtener todos los nombres de usuario y guardarlos en window.allUserNames
    fetch('/api/users/names')
        .then(response => response.json())
        .then(data => {
            window.allUserNames = data.user_names || [];
            console.log('Nombres de usuarios cargados:', window.allUserNames);
        })
        .catch(error => console.error('Error al cargar los nombres de usuario:', error));

    cargarUltimaSeleccion();

    editarPerfil();
    
    if (typeof initFormsTask === 'function') initFormsTask();

    if (typeof initFormsBien === 'function') initFormsBien();

    if (typeof initUserFunctions === 'function') initUserFunctions();

    if (typeof initGroupFunctions === 'function') {
        initGroupFunctions();
        initInventoryFunctions();
        initGoodsInventoryFunctions();
    }

    if (typeof initFoldersFunctions === 'function') {
        initFoldersFunctions();
    }

    if (typeof initReportsFunctions === 'function') {
        initReportsFunctions();
    }


}